<!--https://github.com/JarenChow/Janvas Created by JarenChow in 2020-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hello World</title>
  <style type="text/css">
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>

<canvas style="width: 100%;height:100%"></canvas>

<script src="../dist/janvas.min.js"></script>
<script>
  // Your code here.
  var taiji = function (canvas) {
    var ctx = canvas.getContext("2d"),
      width = canvas.width = canvas.offsetWidth,
      height = canvas.height = canvas.offsetHeight;

    var factory = {
      createTaiji: function (x, y, r) {
        var outer = new Arc(ctx, x, y, r);
        outer.getStyle().setLineWidth(r / 8);
        var left = new Arc(ctx, x, y, r, Math.PI / 2, -Math.PI / 2, false, x, y);
        var right = new Arc(ctx, x, y, r, Math.PI / 2, -Math.PI / 2, true, x, y);
        right.getStyle().setFillStyle("white");
        var top = new Arc(ctx, x, y - r / 2, r / 2, 0, Math.PI * 2, false, x, y);
        var bottom = new Arc(ctx, x, y + r / 2, r / 2, 0, Math.PI * 2, false, x, y);
        bottom.getStyle().setFillStyle("white");
        var topSmall = new Arc(ctx, x, y - r / 2, r / 8, 0, Math.PI * 2, false, x, y);
        var bottomSmall = new Arc(ctx, x, y + r / 2, r / 8, 0, Math.PI * 2, false, x, y);
        topSmall.getStyle().setFillStyle("white");

        function draw() {
          outer.stroke();
          left.fill();
          right.fill();
          top.fill();
          bottom.fill();
          topSmall.fill();
          bottomSmall.fill();
        }

        function init(x, y) {
          outer.init(x, y, x, y);
          left.init(x, y, x, y);
          right.init(x, y, x, y);
          top.init(x, y - r / 2, x, y);
          bottom.init(x, y + r / 2, x, y);
          topSmall.init(x, y - r / 2, x, y);
          bottomSmall.init(x, y + r / 2, x, y);
        }

        function rotate(angle) {
          left.getMatrix().setAngle(angle);
          right.getMatrix().setAngle(angle);
          top.getMatrix().setAngle(angle);
          bottom.getMatrix().setAngle(angle);
          topSmall.getMatrix().setAngle(angle);
          bottomSmall.getMatrix().setAngle(angle);
        }

        return {
          init: init,
          draw: draw,
          rotate: rotate
        };
      }
    };

    var taiji = factory.createTaiji(width / 2, height / 2, Math.min(width / 2, height / 2) * 0.8);

    new AnimateRAF(ctx, 0, 0, width, height, function (ts) {
      taiji.draw();
      taiji.rotate(Math.PI / 2000 * ts);
    }).start();

    addEventListener("mousemove", function (ev) {
      if (ev.buttons) taiji.init(ev.offsetX, ev.offsetY);
    });

    return {};
  }

  var closure = taiji(document.querySelector("canvas"));
</script>

</body>
</html>
