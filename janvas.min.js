// https://github.com/JarenChow/Janvas Created by JarenChow in 2020
"use strict";function Utils(){}function Rgb(t,i,e,s){this.red=t,this.green=i,this.blue=e,this.alpha=s}Utils.canvas=document.createElement("canvas"),Utils.ctx=Utils.canvas.getContext("2d",{alpha:!0,desynchronized:!1}),Utils.inheritPrototype=function(t){t.prototype=Object.create(arguments[1].prototype),Object.defineProperty(t.prototype,"constructor",{value:t,enumerable:!1});for(var i=2;i<arguments.length;i++){var e=arguments[i].prototype;for(var s in e)t.prototype.hasOwnProperty(s)||(t.prototype[s]=e[s])}},Utils.measureTextWidth=function(t,i,e){return Utils.ctx.font=e?i+"px "+e:i,Utils.ctx.measureText(t).width},Utils.measureTextFontSize=function(t,i,e){return function s(n,o){if(n===o)return n;if(n+1===o)return Utils.measureTextWidth(t,o,e)>i?n:o;var r=Math.floor((n+o)/2),h=Utils.measureTextWidth(t,r,e);return h>i?s(n,r-1):h<i?s(r,o):r}(10,500)},Utils.measureText=function(t,i,e){Utils.ctx.font=e?i+"px "+e:i;var s=Utils.ctx.measureText(t);return{width:s.width,height:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent,offsetY:(s.actualBoundingBoxAscent-s.actualBoundingBoxDescent)/2}},Utils.loadImage=function(t,i){var e=new Image;e.onload=function(){i(this)},e.src=t},Utils.loadImages=function(t,i){var e=[];t.forEach((function(s){Utils.loadImage(s,(function(s){e.push(s),e.length===t.length&&i(e)}))}))},Utils.loadImagesAsDict=function(t,i){var e,s={},n=0,o=0;for(e in t)o++;for(e in t)s[e]=new Image,s[e].onload=function(){++n===o&&i(s)},s[e].src=t[e]},Utils.createLinearGradient=function(t,i,e,s,n){return n&&(t+=n._dx,i+=n._dy,e+=n._dx,s+=n._dy),Utils.ctx.createLinearGradient(t,i,e,s)},Utils.createRadialGradient=function(t,i,e,s,n,o,r){return r&&(t+=r._dx,i+=r._dy,s+=r._dx,n+=r._dy),Utils.ctx.createRadialGradient(t,i,e,s,n,o)},Utils.createPattern=function(t,i,e){var s=Utils.ctx.createPattern(t,e||"repeat");return i&&s.setTransform({a:i.getM11(),b:i.getM12(),c:i.getM21(),d:i.getM22(),e:i.offsetX,f:i.offsetY}),s},Utils.drawImage=function(t,i,e,s,n,o,r,h,a){Utils.resetArea(t),1===arguments.length?Utils.ctx.drawImage(t,0,0):3===arguments.length?Utils.ctx.drawImage(t,i,e):5===arguments.length?Utils.ctx.drawImage(t,i,e,s,n):Utils.ctx.drawImage(t,i,e,s,n,o,r,h,a)},Utils.putImageData=function(t,i,e,s,n,o,r){Utils.resetArea(t),1===arguments.length?Utils.ctx.putImageData(t,0,0):3===arguments.length?Utils.ctx.putImageData(t,i,e):Utils.ctx.putImageData(t,i,e,s,n,o,r)},Utils.saveCanvas=function(t){var i=document.createElement("a");i.href=Utils.canvas.toDataURL(),i.download=t?t+".png":"canvas.png",i.click()},Utils.copyImageData=function(t){var i=Utils.ctx.createImageData(t);return i.data.set(t.data),i},Utils.image2ImageData=function(t){return Utils.resetArea(t),Utils.ctx.drawImage(t,0,0),Utils.ctx.getImageData(0,0,t.width,t.height)},Utils.resetArea=function(t){Utils.canvas.width=t.width,Utils.canvas.height=t.height},Utils.randInt=function(t,i,e){return 1===arguments.length?Math.floor(Math.random()*t):e?Math.floor(Math.random()*(i-t+1))+t:Math.floor(Math.random()*(i-t))+t},Utils.randSign=function(){return Math.random()>.5?1:-1},Utils.factorial=function(t){switch(t){case 21:return 5109094217170944e4;case 20:return 243290200817664e4;case 19:return 0x1b02b9306890000;case 18:return 6402373705728e3;case 17:return 355687428096e3;case 16:return 20922789888e3;case 15:return 1307674368e3;case 14:return 87178291200;case 13:return 6227020800;case 12:return 479001600;case 11:return 39916800;case 10:return 3628800;case 9:return 362880;case 8:return 40320;case 7:return 5040;case 6:return 720;case 5:return 120;case 4:return 24;case 3:return 6;case 2:return 2;case 1:case 0:return 1}return t*Utils.factorial(t-1)},Utils.combination=function(t,i){return Utils.factorial(i)/(Utils.factorial(t)*Utils.factorial(i-t))},Utils.pythagorean=function(t,i){return Math.sqrt(Math.pow(t,2)+Math.pow(i,2))},Utils.deg2rad=function(t){return.017453292519943295*t},Utils.rad2deg=function(t){return 57.29577951308232*t},Utils.unique=function(t){return Array.from(new Set(t))},Utils.jsonClone=function(t){return JSON.parse(JSON.stringify(t))},Utils.speedTest=function(t,i,e){e+=" "+i.toLocaleString()+" times",console.time(e);for(var s=0;s<i;s++)t();console.timeEnd(e)},Utils.documentScrollBarWidth=function(){var t=document.body.style.overflow;document.body.style.overflow="hidden";var i=document.body.clientWidth;return document.body.style.overflow="scroll",(i-=document.body.clientWidth)||(i=document.body.offsetWidth-document.body.clientWidth),document.body.style.overflow=t,i},Utils.documentVisibleState=function(t){var i,e;void 0!==document.hidden?(e="visibilitychange",i="visibilityState"):void 0!==document.mozHidden?(e="mozvisibilitychange",i="mozVisibilityState"):void 0!==document.msHidden?(e="msvisibilitychange",i="msVisibilityState"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",i="webkitVisibilityState"),document.addEventListener(e,(function(){t(document[i])}),!1),t(document[i])},Rgb.RGB="rgb",Rgb.RGBA="rgba",Rgb.LEFTPARENTHESIS="(",Rgb.RIGHTPARENTHESIS=")",Rgb.COMMA=", ",Rgb.HEX="#",Rgb.HEX_PREFIX="0x",Rgb.HEX_MAP=new Map;for(let t=0;t<10;t++)Rgb.HEX_MAP.set(t,String.fromCharCode(t+48));for(let t=10;t<16;t++)Rgb.HEX_MAP.set(t,String.fromCharCode(t+87));function Hsl(t,i,e,s){this.hue=t,this.saturation=i,this.lightness=e,this.alpha=s}function Matrix(){this.offsetX=Matrix.DEFAULT_OFFSET_X,this.offsetY=Matrix.DEFAULT_OFFSET_Y,this.angle=Matrix.DEFAULT_ANGLE,this._cos=Matrix.DEFAULT_COS,this._sin=Matrix.DEFAULT_SIN,this.scaleX=Matrix.DEFAULT_SCALE_X,this.scaleY=Matrix.DEFAULT_SCALE_Y,this.skewX=Matrix.DEFAULT_SKEW_X,this._tanX=Matrix.DEFAULT_TAN_X,this.skewY=Matrix.DEFAULT_SKEW_Y,this._tanY=Matrix.DEFAULT_TAN_Y,this._tanV=Matrix.DEFAULT_TAN_V}function FillStrokeStyle(){this.fillStyle=FillStrokeStyle.DEFAULT_FILL_STYLE,this.strokeStyle=FillStrokeStyle.DEFAULT_STROKE_STYLE}function TextStyle(){FillStrokeStyle.call(this),this.font=TextStyle.DEFAULT_FONT,this.textAlign=TextStyle.DEFAULT_TEXT_ALIGN,this.textBaseline=TextStyle.DEFAULT_TEXT_BASELINE}function ShapeStyle(){FillStrokeStyle.call(this),this.lineDash=ShapeStyle.DEFAULT_LINE_DASH,this.lineDashOffset=ShapeStyle.DEFAULT_LINE_DASH_OFFSET,this.lineWidth=ShapeStyle.DEFAULT_LINE_WIDTH}function ShadowStyle(){this.shadowBlur=ShadowStyle.DEFAULT_SHADOW_BLUR,this.shadowColor=ShadowStyle.DEFAULT_SHADOW_COLOR,this.shadowOffsetX=ShadowStyle.DEFAULT_SHADOW_OFFSET_X,this.shadowOffsetY=ShadowStyle.DEFAULT_SHADOW_OFFSET_Y}function OtherStyle(){this.lineCap=OtherStyle.DEFAULT_LINE_CAP,this.lineJoin=OtherStyle.DEFAULT_LINE_JOIN,this.miterLimit=OtherStyle.DEFAULT_MITER_LIMIT,this.direction=OtherStyle.DEFAULT_DIRECTION,this.imageSmoothingEnabled=OtherStyle.DEFAULT_IMAGE_SMOOTHING_ENABLED,this.imageSmoothingQuality=OtherStyle.DEFAULT_IMAGE_SMOOTHING_QUALITY}function Point(t,i){this.init(t,i)}function Collision(){}function Setting(t){this.ctx=t}function ImgData(){}function Animate(t,i,e,s,n,o,r,h){this.ctx=t,this.sx=i,this.sy=e,this.sw=s,this.sh=n,this.code=o,this.delay=r,this.count=h,this.requestId=void 0,this.defaultBind=this.drawDefault.bind(this),this.intervalBind=this.drawInterval.bind(this)}function AnimateITV(t,i,e,s,n,o,r,h){Animate.call(this,t,i,e,s,n,o,r||16,h||-1)}function AnimateRAF(t,i,e,s,n,o,r,h){Animate.call(this,t,i,e,s,n,o,r,h)}function AnimateGRD(t,i,e,s,n,o,r,h,a){AnimateRAF.call(this,t,i,e,s,n,o,r,h),this.bgColor=a||"rgba(237, 237, 237, 0.3)"}function BasicShape(t,i,e,s,n){this.ctx=t,this.init(i,e,isNaN(s)?0:s,isNaN(n)?0:n),this.mat=new Matrix}function Shape(t,i,e,s,n){BasicShape.call(this,t,i,e,s,n),this.sty=new ShapeStyle}function Rect(t,i,e,s,n,o,r){Shape.call(this,t,i,e,o,r),this.setWidth(s).setHeight(n)}function RoundRect(t,i,e,s,n,o,r,h){Rect.call(this,t,i,e,s,n,r,h),this.setRadius(o)}function ImageShape(t,i,e,s,n){Rect.call(this,t,i,e,0,0,s,n)}function Arc(t,i,e,s,n,o,r,h,a){Shape.call(this,t,i,e,h,a),this.setRadius(s).setStartAngle(isNaN(n)?0:n).setEndAngle(isNaN(o)?2*Math.PI:o).setAnticlockwise(void 0!==r&&r)}function Sector(t,i,e,s,n,o,r,h,a){Arc.call(this,t,i,e,s,n,o,r,h,a)}function Ellipse(t,i,e,s,n,o,r,h,a,c,p){Arc.call(this,t,i,e,s,r,h,a,c,p),this.setRadiusY(n).setRotation(isNaN(o)?0:o)}function Line(t,i,e,s,n,o,r){Shape.call(this,t,i,e,o,r),this.setEndX(s).setEndY(n)}function BezierLine(t,i,e,s,n,o,r,h,a,c,p){Line.call(this,t,i,e,s,n,c,p),this.setControlPoint1X(o).setControlPoint1Y(r).setControlPoint2X(h).setControlPoint2Y(a)}function ArrowHead(t,i,e,s,n,o,r,h,a){Shape.call(this,t,i,e,h,a),this.setAngle(isNaN(s)?0:s).setClosed(void 0!==n&&n).setArrowLength(isNaN(o)?10:o).setArrowAngle(isNaN(r)?Math.PI/6:r)}function Arrow(t,i,e,s,n,o,r,h,a,c,p){ArrowHead.call(this,t,i,e,Math.atan2(e-n,i-s),r,h,a,c,p),this.setEndX(s).setEndY(n).setEmptyLength(o)}function RegularPolygon(t,i,e,s,n,o,r){Shape.call(this,t,i,e,o,r),this.setRadius(s).setSides(n)}function RegularStar(t,i,e,s,n,o,r){RegularPolygon.call(this,t,i,e,s,n,o,r)}function Text(t,i,e,s,n,o){BasicShape.call(this,t,i,e,n,o),this.text=s,this.sty=new TextStyle}function DotShape(t,i,e,s,n,o,r){Shape.call(this,t,i,e,o,r),this.points=s,this.setLength(n||s.length)._initDataPoints()._initCache()}function Polyline(t,i,e,s,n,o,r){DotShape.call(this,t,i,e,s,n,o,r)}function Bezier(t,i,e,s,n,o,r){Polyline.call(this,t,i,e,s,n||202,o,r)}function Polygon(t,i,e,s,n,o,r){DotShape.call(this,t,i,e,s,n,o,r)}function PolyRect(t,i,e,s,n,o){Polygon.call(this,t,i,e,s,8,n,o)}function PolyArc(t,i,e,s,n,o,r){Polygon.call(this,t,i,e,s,n||34,o,r)}function SmoothLine(t,i,e,s,n,o){DotShape.call(this,t,i,e,s,3*s.length-4,n,o)}function Dots(t,i,e,s,n,o,r){DotShape.call(this,t,i,e,s,s.length,o,r),this.setRadius(n||3)}function FixedShape(t,i,e,s,n,o){Shape.call(this,t,i,e,n,o),this.path=new Path2D(s)}function FixedRect(t,i,e,s,n,o,r){FixedShape.call(this,t,i,e,void 0,o,r),this.sw=s,this.sh=n,this.process()}function FixedArc(t,i,e,s,n,o,r,h,a){FixedShape.call(this,t,i,e,void 0,h,a),this.r=s,this.startAngle=isNaN(n)?0:n,this.endAngle=isNaN(o)?2*Math.PI:o,this.anticlockwise=r||!1,this.process()}Rgb.REGEX_RGB=/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3}),? ?([0,1]\.?\d*)?\)/,Rgb.REGEX_HEX=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,Rgb.copy=function(t){return new Rgb(t.red,t.green,t.blue,t.alpha)},Rgb.fromRgbString=function(t){var i=Rgb.REGEX_RGB.exec(t);return new Rgb(parseInt(i[1]),parseInt(i[2]),parseInt(i[3]),Math.round(255*parseFloat(i[4])))},Rgb.fromHexString=function(t){var i=Rgb.REGEX_HEX.exec(t);return new Rgb(parseInt(Rgb.HEX_PREFIX+i[1]),parseInt(Rgb.HEX_PREFIX+i[2]),parseInt(Rgb.HEX_PREFIX+i[3]),parseInt(Rgb.HEX_PREFIX+i[4]))},Rgb.fromRgb=function(t){return new Rgb(t.red,t.green,t.blue,t.alpha)},Rgb.fromHsl=function(t){var i,e,s,n=t.hue,o=t.saturation/100,r=t.lightness/100,h=(1-Math.abs(2*r-1))*o,a=h*(1-Math.abs(n/60%2-1)),c=r-h/2;return n<60?(i=h,e=a,s=0):n<120?(i=a,e=h,s=0):n<180?(i=0,e=h,s=a):n<240?(i=0,e=a,s=h):n<300?(i=a,e=0,s=h):(i=h,e=0,s=a),new Rgb(Math.round(255*(i+c)),Math.round(255*(e+c)),Math.round(255*(s+c)),t.alpha)},Rgb.randomRgb=function(t){return new Rgb(Utils.randInt(256),Utils.randInt(256),Utils.randInt(256),t?Utils.randInt(256):255)},Rgb.designedRgb=function(t){return Rgb.fromHsl(Hsl.designedHsl(t))},Rgb.prototype.sRgbInverseCompanding=function(){return this.red=t(this.red),this.green=t(this.green),this.blue=t(this.blue),this;function t(t){return(t/=255)>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92}},Rgb.prototype.sRgbCompanding=function(){return this.red=t(this.red),this.green=t(this.green),this.blue=t(this.blue),this;function t(t){return 255*(t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)}},Rgb.prototype.sRgbInverseGammaMixing=function(t,i,e){return this.red=t.red*(1-e)+i.red*e,this.green=t.green*(1-e)+i.green*e,this.blue=t.blue*(1-e)+i.blue*e,this},Rgb.prototype.sRgbMarksGammaMixing=function(t,i,e){this.sRgbInverseGammaMixing(t,i,e);var s=.43,n=Math.pow(t.red+t.green+t.blue,s),o=Math.pow(i.red+i.green+i.blue,s),r=Math.pow(n*(1-e)+o*e,1/s),h=this.red+this.green+this.blue;return 0!==h&&(this.red*=r/h,this.green*=r/h,this.blue*=r/h),this},Rgb.prototype.toRgbString=function(t){return(t?Rgb.RGBA:Rgb.RGB)+Rgb.LEFTPARENTHESIS+this.red+Rgb.COMMA+this.green+Rgb.COMMA+this.blue+(t?Rgb.COMMA+this.alpha/255:"")+Rgb.RIGHTPARENTHESIS},Rgb.prototype.toHexString=function(t){return Rgb.HEX+Rgb.HEX_MAP.get(Math.floor(this.red/16))+Rgb.HEX_MAP.get(this.red%16)+Rgb.HEX_MAP.get(Math.floor(this.green/16))+Rgb.HEX_MAP.get(this.green%16)+Rgb.HEX_MAP.get(Math.floor(this.blue/16))+Rgb.HEX_MAP.get(this.blue%16)+(t?Rgb.HEX_MAP.get(Math.floor(this.alpha/16))+Rgb.HEX_MAP.get(this.alpha%16):"")},Rgb.prototype.init=function(t,i,e){return this.red=t,this.green=i,this.blue=e,this},Rgb.prototype.equals=function(t){return void 0!==t&&(t===this||this.red===t.red&&this.green===t.green&&this.blue===t.blue&&this.alpha===t.alpha)},Rgb.prototype.copy=function(){return new Rgb(this.red,this.green,this.blue,this.alpha)},Rgb.prototype.getRed=function(){return this.red},Rgb.prototype.setRed=function(t){return this.red=t,this},Rgb.prototype.getGreen=function(){return this.green},Rgb.prototype.setGreen=function(t){return this.green=t,this},Rgb.prototype.getBlue=function(){return this.blue},Rgb.prototype.setBlue=function(t){return this.blue=t,this},Rgb.prototype.getAlpha=function(){return this.alpha},Rgb.prototype.setAlpha=function(t){return this.alpha=t,this},Hsl.HSL="hsl",Hsl.HSLA="hsla",Hsl.LEFTPARENTHESIS="(",Hsl.RIGHTPARENTHESIS=")",Hsl.COMMA=", ",Hsl.PERCENT="%",Hsl.REGEX_HSL=/hsla?\((\d{1,3}\.?\d?), ?(\d{1,3}\.?\d?)%, ?(\d{1,3}\.?\d?)%,? ?([0,1]\.?\d*)?\)/,Hsl.copy=function(t){return new Hsl(t.hue,t.saturation,t.lightness,t.alpha)},Hsl.fromHslString=function(t){var i=Hsl.REGEX_HSL.exec(t);return new Hsl(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),Math.round(255*parseFloat(i[4])))},Hsl.fromHsl=function(t){return new Hsl(t.hue,t.saturation,t.lightness,t.alpha)},Hsl.fromRgb=function(t){var i,e,s=t.red/255,n=t.green/255,o=t.blue/255,r=Math.max(s,n,o),h=Math.min(s,n,o),a=r-h,c=(r+h)/2;return 0===a?i=e=0:(i=r===s?(n-o)/a*60+(n<o?360:0):r===n?(o-s)/a*60+120:(s-n)/a*60+240,e=a/(1-Math.abs(2*c-1))),new Hsl(Math.round(10*i)/10,Math.round(1e3*e)/10,Math.round(1e3*c)/10,t.alpha)},Hsl.randomHsl=function(t){return new Hsl(Utils.randInt(3600)/10,Utils.randInt(1e3)/10,Utils.randInt(1e3)/10,t?Utils.randInt(256):255)},Hsl.designedHsl=function(t){return new Hsl(isNaN(t)?Utils.randInt(360):t,80,70,255)},Hsl.prototype.toHslString=function(t){return(t?Hsl.HSLA:Hsl.HSL)+Hsl.LEFTPARENTHESIS+this.hue+Hsl.COMMA+this.saturation+Hsl.PERCENT+Hsl.COMMA+this.lightness+Hsl.PERCENT+(t?Hsl.COMMA+this.alpha/255:"")+Hsl.RIGHTPARENTHESIS},Hsl.prototype.init=function(t,i,e){return this.hue=t,this.saturation=i,this.lightness=e,this},Hsl.prototype.equals=function(t){return void 0!==t&&(t===this||this.hue===t.hue&&this.saturation===t.saturation&&this.lightness===t.lightness&&this.alpha===t.alpha)},Hsl.prototype.copy=function(){return new Hsl(this.hue,this.saturation,this.lightness,this.alpha)},Hsl.prototype.getHue=function(){return this.hue},Hsl.prototype.setHue=function(t){return this.hue=t,this},Hsl.prototype.getSaturation=function(){return this.saturation},Hsl.prototype.setSaturation=function(t){return this.saturation=t,this},Hsl.prototype.getLightness=function(){return this.lightness},Hsl.prototype.setLightness=function(t){return this.lightness=t,this},Hsl.prototype.getAlpha=function(){return this.alpha},Hsl.prototype.setAlpha=function(t){return this.alpha=t,this},Matrix.DEFAULT_SKEW_X=0,Matrix.DEFAULT_TAN_X=0,Matrix.DEFAULT_SKEW_Y=0,Matrix.DEFAULT_TAN_Y=0,Matrix.DEFAULT_TAN_V=1,Matrix.DEFAULT_SCALE_X=1,Matrix.DEFAULT_SCALE_Y=1,Matrix.DEFAULT_ANGLE=0,Matrix.DEFAULT_COS=1,Matrix.DEFAULT_SIN=0,Matrix.DEFAULT_OFFSET_X=0,Matrix.DEFAULT_OFFSET_Y=0,Matrix.prototype.init=function(t,i,e,s,n,o,r){return this.skewX!==t&&(this.skewX=t,this._tanX=Math.tan(t)),this.skewY!==i&&(this.skewY=i,this._tanY=Math.tan(i)),this._tanV=1/(1-this._tanX*this._tanY),this.scaleX=e,this.scaleY=s,this.angle!==n&&(this.angle=n,this._cos=Math.cos(n),this._sin=Math.sin(n)),this.offsetX=o,this.offsetY=r,this},Matrix.prototype.isNotDefault=function(){return this._isNotDefault=this.angle!==Matrix.DEFAULT_ANGLE||this.scaleX!==Matrix.DEFAULT_SCALE_X||this.scaleY!==Matrix.DEFAULT_SCALE_Y||this.skewX!==Matrix.DEFAULT_SKEW_X||this.skewY!==Matrix.DEFAULT_SKEW_Y},Matrix.prototype.equals=function(t){return void 0!==t&&(t===this||this.angle===t.angle&&this.scaleX===t.scaleX&&this.scaleY===t.scaleY&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY&&this.skewX===t.skewX&&this.skewY===t.skewY)},Matrix.prototype.getM11=function(){return this._cos*this.scaleX-this._tanY*this._sin*this.scaleY},Matrix.prototype.getM11i=function(){return this._cos*this._tanV/this.scaleX+this._tanX*this._tanV*this._sin/this.scaleY},Matrix.prototype.getM12=function(){return this._sin*this.scaleX+this._tanY*this._cos*this.scaleY},Matrix.prototype.getM12i=function(){return-this._tanY*this._tanV*this._cos/this.scaleX-this._sin*this._tanV/this.scaleY},Matrix.prototype.getM21=function(){return-this._sin*this.scaleY+this._tanX*this._cos*this.scaleX},Matrix.prototype.getM21i=function(){return this._sin*this._tanV/this.scaleX-this._tanX*this._tanV*this._cos/this.scaleY},Matrix.prototype.getM22=function(){return this._cos*this.scaleY+this._tanX*this._sin*this.scaleX},Matrix.prototype.getM22i=function(){return-this._tanY*this._tanV*this._sin/this.scaleX+this._cos*this._tanV/this.scaleY},Matrix.prototype.getM31=function(){return this.offsetX},Matrix.prototype.getM31i=function(){return-this.getM11i()*this.offsetX-this.getM21i()*this.offsetY},Matrix.prototype.getM32=function(){return this.offsetY},Matrix.prototype.getM32i=function(){return-this.getM12i()*this.offsetX-this.getM22i()*this.offsetY},Matrix.prototype.getSkewX=function(){return this.skewX},Matrix.prototype.setSkewX=function(t){return this.skewX!==t&&(this.skewX=t,this._tanX=Math.tan(t),this._tanV=1/(1-this._tanX*this._tanY)),this},Matrix.prototype.getSkewY=function(){return this.skewY},Matrix.prototype.setSkewY=function(t){return this.skewY!==t&&(this.skewY=t,this._tanY=Math.tan(t),this._tanV=1/(1-this._tanX*this._tanY)),this},Matrix.prototype.setSkew=function(t,i){return this.skewX!==t&&(this.skewX=t,this._tanX=Math.tan(t)),this.skewY!==i&&(this.skewY=i,this._tanY=Math.tan(i)),this._tanV=1/(1-this._tanX*this._tanY),this},Matrix.prototype.getScaleX=function(){return this.scaleX},Matrix.prototype.setScaleX=function(t){return this.scaleX=t,this},Matrix.prototype.getScaleY=function(){return this.scaleY},Matrix.prototype.setScaleY=function(t){return this.scaleY=t,this},Matrix.prototype.setScale=function(t,i){return this.scaleX=t,this.scaleY=i,this},Matrix.prototype.getAngle=function(){return this.angle},Matrix.prototype.setAngle=function(t){return this.angle!==t&&(this.angle=t,this._cos=Math.cos(t),this._sin=Math.sin(t)),this},Matrix.prototype.getOffsetX=function(){return this.offsetX},Matrix.prototype.setOffsetX=function(t){return this.offsetX=t,this},Matrix.prototype.getOffsetY=function(){return this.offsetY},Matrix.prototype.setOffsetY=function(t){return this.offsetY=t,this},Matrix.prototype.setOffset=function(t,i){return this.offsetX=t,this.offsetY=i,this},FillStrokeStyle.DEFAULT_FILL_STYLE="#000000",FillStrokeStyle.DEFAULT_STROKE_STYLE="#000000",FillStrokeStyle.prototype.getFillStyle=function(){return this.fillStyle},FillStrokeStyle.prototype.setFillStyle=function(t){return this.fillStyle=t,this},FillStrokeStyle.prototype.getStrokeStyle=function(){return this.strokeStyle},FillStrokeStyle.prototype.setStrokeStyle=function(t){return this.strokeStyle=t,this},Utils.inheritPrototype(TextStyle,FillStrokeStyle),TextStyle.DEFAULT_FONT="10px sans-serif",TextStyle.DEFAULT_TEXT_ALIGN="start",TextStyle.DEFAULT_TEXT_BASELINE="alphabetic",TextStyle.prototype.getFont=function(){return this.font},TextStyle.prototype.setFont=function(t){return this.font=t,this},TextStyle.prototype.getTextAlign=function(){return this.textAlign},TextStyle.prototype.setTextAlign=function(t){return this.textAlign=t,this},TextStyle.prototype.getTextBaseline=function(){return this.textBaseline},TextStyle.prototype.setTextBaseline=function(t){return this.textBaseline=t,this},Utils.inheritPrototype(ShapeStyle,FillStrokeStyle),ShapeStyle.DEFAULT_LINE_DASH=[],ShapeStyle.DEFAULT_LINE_DASH_OFFSET=0,ShapeStyle.DEFAULT_LINE_WIDTH=1,ShapeStyle.prototype.getLineDash=function(){return this.lineDash},ShapeStyle.prototype.setLineDash=function(t){return this.lineDash=t,this},ShapeStyle.prototype.getLineDashOffset=function(){return this.lineDashOffset},ShapeStyle.prototype.setLineDashOffset=function(t){return this.lineDashOffset=t,this},ShapeStyle.prototype.getLineWidth=function(){return this.lineWidth},ShapeStyle.prototype.setLineWidth=function(t){return this.lineWidth=t,this},ShadowStyle.DEFAULT_SHADOW_BLUR=0,ShadowStyle.DEFAULT_SHADOW_COLOR="rgba(0, 0, 0, 0)",ShadowStyle.DEFAULT_SHADOW_OFFSET_X=0,ShadowStyle.DEFAULT_SHADOW_OFFSET_Y=0,ShadowStyle.prototype.getShadowBlur=function(){return this.shadowBlur},ShadowStyle.prototype.setShadowBlur=function(t){return this.shadowBlur=t,this},ShadowStyle.prototype.getShadowColor=function(){return this.shadowColor},ShadowStyle.prototype.setShadowColor=function(t){return this.shadowColor=t,this},ShadowStyle.prototype.getShadowOffsetX=function(){return this.shadowOffsetX},ShadowStyle.prototype.setShadowOffsetX=function(t){return this.shadowOffsetX=t,this},ShadowStyle.prototype.getShadowOffsetY=function(){return this.shadowOffsetY},ShadowStyle.prototype.setShadowOffsetY=function(t){return this.shadowOffsetY=t,this},OtherStyle.DEFAULT_LINE_CAP="butt",OtherStyle.DEFAULT_LINE_JOIN="miter",OtherStyle.DEFAULT_MITER_LIMIT=10,OtherStyle.DEFAULT_DIRECTION="ltr",OtherStyle.DEFAULT_IMAGE_SMOOTHING_ENABLED=!0,OtherStyle.DEFAULT_IMAGE_SMOOTHING_QUALITY="low",OtherStyle.prototype.getLineCap=function(){return this.lineCap},OtherStyle.prototype.setLineCap=function(t){return this.lineCap=t,this},OtherStyle.prototype.getLineJoin=function(){return this.lineJoin},OtherStyle.prototype.setLineJoin=function(t){return this.lineJoin=t,this},OtherStyle.prototype.getMiterLimit=function(){return this.miterLimit},OtherStyle.prototype.setMiterLimit=function(t){return this.miterLimit=t,this},OtherStyle.prototype.getDirection=function(){return this.direction},OtherStyle.prototype.setDirection=function(t){return this.direction=t,this},OtherStyle.prototype.getImageSmoothingEnabled=function(){return this.imageSmoothingEnabled},OtherStyle.prototype.setImageSmoothingEnabled=function(t){return this.imageSmoothingEnabled=t,this},OtherStyle.prototype.getImageSmoothingQuality=function(){return this.imageSmoothingQuality},OtherStyle.prototype.setImageSmoothingQuality=function(t){return this.imageSmoothingQuality=t,this},Point.prototype.init=function(t,i){return this.x=t,this.y=i,this},Point.prototype.equals=function(t){return void 0!==t&&(t===this||this.x===t.x&&this.y===t.y)},Point.prototype.getX=function(){return this.x},Point.prototype.setX=function(t){return this.x=t,this},Point.prototype.getY=function(){return this.y},Point.prototype.setY=function(t){return this.y=t,this},Point.basisX=new Point(1,0),Point.basisY=new Point(0,1),Point.modulus=function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},Point.slope=function(t,i){return(i.y-t.y)/(i.x-t.x)},Point.radian=function(t,i){return Math.atan2(i.y-t.y,i.x-t.x)},Point.dotProduct=function(t,i){return t.x*i.x+t.y*i.y},Point.crossProduct=function(t,i){return t.x*i.y-t.y*i.x},Point.theta=function(t,i){return Math.acos(Point.dotProduct(t,i)/(t.modulus()*i.modulus()))},Point.offsetX=function(t,i){return i.x-t.x},Point.offsetY=function(t,i){return i.y-t.y},Point.copy=function(t){return new Point(t.x,t.y)},Point.unit=function(t){var i=t.modulus();return new Point(t.x/i,t.y/i)},Point.abs=function(t){return new Point(t.x<0?-t.x:t.x,t.y<0?-t.y:t.y)},Point.inverse=function(t){return new Point(-t.x,-t.y)},Point.inverseX=function(t){return new Point(-t.x,t.y)},Point.inverseY=function(t){return new Point(t.x,-t.y)},Point.vertical=function(t){return new Point(-t.y,t.x)},Point.verticalAnti=function(t){return new Point(t.y,-t.x)},Point.add=function(t,i){return new Point(t.x+i.x,t.y+i.y)},Point.subtract=function(t,i){return new Point(t.x-i.x,t.y-i.y)},Point.multiply=function(t,i){return new Point(t.x*i.x-t.y*i.y,t.y*i.x+t.x*i.y)},Point.divide=function(t,i){var e=Math.pow(i.x,2)+Math.pow(i.y,2);return new Point((t.x*i.x+t.y*i.y)/e,(t.y*i.x-t.x*i.y)/e)},Point.inline=function(t,i,e){return new Point(t.x*(1-e)+i.x*e,t.y*(1-e)+i.y*e)},Point.lambda2point=function(t,i){return 0===i.x?t.y/i.y:t.x/i.x},Point.lambda2line=function(t,i,e){return i.x===e.x?(t.y-i.y)/(e.y-i.y):(t.x-i.x)/(e.x-i.x)},Point.point2pointAnti=function(t,i){return t.x*i.y<t.y*i.x},Point.point2lineAnti=function(t,i,e){return(t.x-i.x)*(t.y-e.y)<(t.y-i.y)*(t.x-e.x)},Point.point2point=function(t,i){if(0===i.x)return new Point(0,t.y);if(0===i.y)return new Point(t.x,0);var e=t.x,s=t.y,n=i.x,o=i.y;return new Point((e*n*n+n*o*o+(s-o)*n*o)/(n*n+o*o),(s*o*o+o*n*n+(e-n)*n*o)/(n*n+o*o))},Point.point2line=function(t,i,e){if(i.x===e.x)return new Point(i.x,t.y);if(i.y===e.y)return new Point(t.x,i.y);var s=t.x,n=t.y,o=i.x,r=i.y,h=e.x,a=e.y;return new Point((s*(o-h)*(o-h)+o*(r-a)*(r-a)+(n-r)*(o-h)*(r-a))/((o-h)*(o-h)+(r-a)*(r-a)),(n*(r-a)*(r-a)+r*(o-h)*(o-h)+(s-o)*(o-h)*(r-a))/((o-h)*(o-h)+(r-a)*(r-a)))},Point.line2line=function(t,i,e,s){var n=i.y-t.y,o=t.x-i.x,r=-n*t.x-o*t.y,h=s.y-e.y,a=e.x-s.x,c=-h*e.x-a*e.y,p=n*a-h*o;return new Point((c*o-r*a)/p,(r*h-c*n)/p)},Point.line2arc=function(t,i,e,s){if(t.x===i.x){var n=Math.sqrt(Math.pow(s,2)-Math.pow(t.x-e.x,2));return[new Point(t.x,e.y-n),new Point(t.x,e.y+n)]}var o=(i.y-t.y)/(i.x-t.x),r=t.y-o*t.x,h=Math.pow(o,2),a=h+1,c=Math.sqrt(Math.pow(s,2)*a-Math.pow(e.y-o*e.x-r,2)),p=e.x+e.y*o-r*o,u=r+e.x*o+e.y*h;return[new Point((p+c)/a,(u+o*c)/a),new Point((p-c)/a,(u-o*c)/a)]},Point.arc2arc=function(t,i,e,s){var n=t.x,o=t.y,r=e.x,h=e.y,a=Math.pow(i,2),c=Math.pow(s,2),p=Math.pow(r-n,2)+Math.pow(h-o,2),u=Math.sqrt(p),l=(r-n)/u,f=(h-o)/u,y=(a-c)/2/u,_=(n+r)/2+y*l,d=(o+h)/2+y*f,g=Math.sqrt((a+c)/2-Math.pow(a-c,2)/4/p-p/4),S=g*f,x=-g*l;return[new Point(_+S,d+x),new Point(_-S,d-x)]},Point.arc=function(t,i,e){var s=t.x,n=t.y,o=i.x,r=i.y,h=e.x,a=e.y,c=s*(r-a)-n*(o-h)+o*a-h*r;return new Point(-((s*s+n*n)*(a-r)+(o*o+r*r)*(n-a)+(h*h+a*a)*(r-n))/c/2,-((s*s+n*n)*(o-h)+(o*o+r*r)*(h-s)+(h*h+a*a)*(s-o))/c/2)},Point.skewX=function(t,i){return new Point(t.x+t.y*Math.tan(i),t.y)},Point.skewY=function(t,i){return new Point(t.x,t.y+t.x*Math.tan(i))},Point.skew=function(t,i,e){return new Point(t.x+t.y*Math.tan(i),t.y+t.x*Math.tan(e))},Point.scaleX=function(t,i){return new Point(t.x*i,t.y)},Point.scaleY=function(t,i){return new Point(t.x,t.y*i)},Point.scale=function(t,i,e){return new Point(t.x*i,t.y*e)},Point.rotate=function(t,i){var e=Math.cos(i),s=Math.sin(i);return new Point(t.x*e-t.y*s,t.x*s+t.y*e)},Point.translateX=function(t,i){return new Point(t.x+i,t.y)},Point.translateY=function(t,i){return new Point(t.x,t.y+i)},Point.translate=function(t,i,e){return new Point(t.x+i,t.y+e)},Point.transform=function(t,i){return new Point(i.getM11()*t.x+i.getM21()*t.y+i.offsetX,i.getM12()*t.x+i.getM22()*t.y+i.offsetY)},Point.resetTransform=function(t,i){return new Point(i.getM11i()*(t.x-i.offsetX)+i.getM21i()*(t.y-i.offsetY),i.getM12i()*(t.x-i.offsetX)+i.getM22i()*(t.y-i.offsetY))},Point.prototype.modulus=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},Point.prototype.slope=function(){return this.y/this.x},Point.prototype.radian=function(){return Math.atan2(this.y,this.x)},Point.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y},Point.prototype.crossProduct=function(t){return this.x*t.y-this.y*t.x},Point.prototype.theta=function(t){return Math.acos(this.dotProduct(t)/(this.modulus()*t.modulus()))},Point.prototype.offsetX=function(t){return t.x-this.x},Point.prototype.offsetY=function(t){return t.y-this.y},Point.prototype.copy=function(){return new Point(this.x,this.y)},Point.prototype.unit=function(){var t=this.modulus();return this.x/=t,this.y/=t,this},Point.prototype.abs=function(){return this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y),this},Point.prototype.inverse=function(){return this.x=-this.x,this.y=-this.y,this},Point.prototype.inverseX=function(){return this.x=-this.x,this},Point.prototype.inverseY=function(){return this.y=-this.y,this},Point.prototype.vertical=function(){var t=this.x;return this.x=-this.y,this.y=t,this},Point.prototype.verticalAnti=function(){var t=-this.x;return this.x=this.y,this.y=t,this},Point.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},Point.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},Point.prototype.multiply=function(t){var i=this.y*t.x+this.x*t.y;return this.x=this.x*t.x-this.y*t.y,this.y=i,this},Point.prototype.divide=function(t){var i=Math.pow(t.x,2)+Math.pow(t.y,2),e=(this.y*t.x-this.x*t.y)/i;return this.x=(this.x*t.x+this.y*t.y)/i,this.y=e,this},Point.prototype.inline=function(t,i){return this.x=this.x*(1-i)+t.x*i,this.y=this.y*(1-i)+t.y*i,this},Point.prototype.skewX=function(t){return this.x+=this.y*Math.tan(t),this},Point.prototype.skewY=function(t){return this.y+=this.x*Math.tan(t),this},Point.prototype.skew=function(t,i){var e=this.y+this.x*Math.tan(i);return this.x+=this.y*Math.tan(t),this.y=e,this},Point.prototype.scaleX=function(t){return this.x*=t,this},Point.prototype.scaleY=function(t){return this.y*=t,this},Point.prototype.scale=function(t,i){return this.x*=t,this.y*=i,this},Point.prototype.rotate=function(t){var i=Math.cos(t),e=Math.sin(t),s=this.x*e+this.y*i;return this.x=this.x*i-this.y*e,this.y=s,this},Point.prototype.translateX=function(t){return this.x+=t,this},Point.prototype.translateY=function(t){return this.y+=t,this},Point.prototype.translate=function(t,i){return this.x+=t,this.y+=i,this},Point.prototype.transform=function(t){var i=t.getM12()*this.x+t.getM22()*this.y+t.offsetY;return this.x=t.getM11()*this.x+t.getM21()*this.y+t.offsetX,this.y=i,this},Point.prototype.resetTransform=function(t){this.x-=t.offsetX,this.y-=t.offsetY;var i=t.getM12i()*this.x+t.getM22i()*this.y;return this.x=t.getM11i()*this.x+t.getM21i()*this.y,this.y=i,this},Collision.arc=function(t,i,e,s,n,o){return Math.sqrt(Math.pow(t-s,2)+Math.pow(i-n,2))<=e+o},Collision.rect=function(t,i,e,s,n,o,r,h){return t<=r&&i<=h&&e>=n&&s>=o},Collision.arcRect=function(t,i,e,s,n,o,r,h,a,c,p){if(11===arguments.length){var u=(h-t)*p+(i-a)*c+a;t=(t-h)*c+(i-a)*p+h,i=u}var l,f;return l=t<s?s:t>o?o:t,f=i<n?n:i>r?r:i,Math.sqrt(Math.pow(l-t,2)+Math.pow(f-i,2))<=e},Collision.light=function(t,i,e,s,n,o,r,h){if((t-n)*(i-h)<(i-o)*(t-r))return!1;var a=s-i,c=t-e,p=h-o,u=n-r,l=((a*t+c*i)*u-(p*n+u*o)*c)/(a*u-p*c);return l>=n&&l<=r},Collision.sepAxis=function(t,i){var e,s,n;for(e=0;e<t.length;e+=2)if(s=t[e+2],n=t[e+3],e+2===t.length&&(s=t[0],n=t[1]),o(t,i,n-t[e+1],t[e]-s))return!1;for(e=0;e<i.length;e+=2)if(s=i[e+2],n=i[e+3],e+2===i.length&&(s=i[0],n=i[1]),o(t,i,n-i[e+1],i[e]-s))return!1;return!0;function o(t,i,e,s){var n,o,r,h,a,c;for(a=0;a<t.length;a+=2)c=t[a]*e+t[a+1]*s,isNaN(n)?n=o=c:c<n?n=c:c>o&&(o=c);for(a=0;a<i.length;a+=2)c=i[a]*e+i[a+1]*s,isNaN(r)?r=h=c:c<r?r=c:c>h&&(h=c);return o<r||n>h}},Collision.sepAxisArc=function(t,i,e,s){var n,o,r,h,a;for(n=0;n<t.length;n+=2)if(o=t[n+2],r=t[n+3],n+2===t.length&&(o=t[0],r=t[1]),c(t,i,e,s,r-t[n+1],t[n]-o))return!1;for(n=0;n<t.length;n+=2)o=t[n],r=t[n+1],(isNaN(h)||Math.pow(o-i,2)+Math.pow(r-e,2)<Math.pow(h-i,2)+Math.pow(a-e,2))&&(h=o,a=r);return!c(t,i,e,s,h-i,a-e);function c(t,i,e,s,n,o){var r,h,a,c,p;for(n/=a=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),o/=a,p=0;p<t.length;p+=2)c=t[p]*n+t[p+1]*o,isNaN(r)?r=h=c:c<r?r=c:c>h&&(h=c);return h<(c=i*n+e*o)-s||r>c+s}},Setting.DEFAULT_GLOBAL_ALPHA=1,Setting.DEFAULT_GLOBAL_COMPOSITE_OPERATION="source-over",Setting.DEFAULT_FILTER="none",Setting.prototype.setGlobalAlpha=function(t){var i=this.ctx;return i.CURRENT_GLOBAL_ALPHA!==t&&(i.globalAlpha=i.CURRENT_GLOBAL_ALPHA=t),this},Setting.prototype.resetGlobalAlpha=function(){var t=this.ctx;return t.CURRENT_GLOBAL_ALPHA!==Setting.DEFAULT_GLOBAL_ALPHA&&(t.globalAlpha=t.CURRENT_GLOBAL_ALPHA=Setting.DEFAULT_GLOBAL_ALPHA),this},Setting.prototype.setGlobalCompositeOperation=function(t){var i=this.ctx;return i.CURRENT_GLOBAL_COMPOSITE_OPERATION!==t&&(i.globalCompositeOperation=i.CURRENT_GLOBAL_COMPOSITE_OPERATION=t),this},Setting.prototype.resetGlobalCompositeOperation=function(){var t=this.ctx;return t.CURRENT_GLOBAL_COMPOSITE_OPERATION!==Setting.DEFAULT_GLOBAL_COMPOSITE_OPERATION&&(t.globalCompositeOperation=t.CURRENT_GLOBAL_COMPOSITE_OPERATION=Setting.DEFAULT_GLOBAL_COMPOSITE_OPERATION),this},Setting.prototype.setFilter=function(t){var i=this.ctx;return i.CURRENT_FILTER!==t&&(i.filter=i.CURRENT_FILTER=t),this},Setting.prototype.resetFilter=function(){var t=this.ctx;return t.CURRENT_FILTER!==Setting.DEFAULT_FILTER&&(t.filter=t.CURRENT_FILTER=Setting.DEFAULT_FILTER),this},Setting.prototype.setShadowStyles=function(t){var i=this.ctx;return i.CURRENT_SHADOW_BLUR!==t.shadowBlur&&(i.shadowBlur=i.CURRENT_SHADOW_BLUR=t.shadowBlur),i.CURRENT_SHADOW_COLOR!==t.shadowColor&&(i.shadowColor=i.CURRENT_SHADOW_COLOR=t.shadowColor),i.CURRENT_SHADOW_OFFSET_X!==t.shadowOffsetX&&(i.shadowOffsetX=i.CURRENT_SHADOW_OFFSET_X=t.shadowOffsetX),i.CURRENT_SHADOW_OFFSET_Y!==t.shadowOffsetY&&(i.shadowOffsetY=i.CURRENT_SHADOW_OFFSET_Y=t.shadowOffsetY),this},Setting.prototype.resetShadowStyles=function(){var t=this.ctx;return t.CURRENT_SHADOW_BLUR!==ShadowStyle.DEFAULT_SHADOW_BLUR&&(t.shadowBlur=t.CURRENT_SHADOW_BLUR=ShadowStyle.DEFAULT_SHADOW_BLUR),t.CURRENT_SHADOW_COLOR!==ShadowStyle.DEFAULT_SHADOW_COLOR&&(t.shadowColor=t.CURRENT_SHADOW_COLOR=ShadowStyle.DEFAULT_SHADOW_COLOR),t.CURRENT_SHADOW_OFFSET_X!==ShadowStyle.DEFAULT_SHADOW_OFFSET_X&&(t.shadowOffsetX=t.CURRENT_SHADOW_OFFSET_X=ShadowStyle.DEFAULT_SHADOW_OFFSET_X),t.CURRENT_SHADOW_OFFSET_Y!==ShadowStyle.DEFAULT_SHADOW_OFFSET_Y&&(t.shadowOffsetY=t.CURRENT_SHADOW_OFFSET_Y=ShadowStyle.DEFAULT_SHADOW_OFFSET_Y),this},Setting.prototype.setOtherStyles=function(t){var i=this.ctx;return i.CURRENT_LINE_CAP!==t.lineCap&&(i.lineCap=i.CURRENT_LINE_CAP=t.lineCap),i.CURRENT_LINE_JOIN!==t.lineJoin&&(i.lineJoin=i.CURRENT_LINE_JOIN=t.lineJoin),i.CURRENT_MITER_LIMIT!==t.miterLimit&&(i.miterLimit=i.CURRENT_MITER_LIMIT=t.miterLimit),i.CURRENT_DIRECTION!==t.direction&&(i.direction=i.CURRENT_DIRECTION=t.direction),i.CURRENT_IMAGE_SMOOTHING_ENABLED!==t.imageSmoothingEnabled&&(i.imageSmoothingEnabled=i.CURRENT_IMAGE_SMOOTHING_ENABLED=t.imageSmoothingEnabled),i.CURRENT_IMAGE_SMOOTHING_QUALITY!==t.imageSmoothingQuality&&(i.imageSmoothingQuality=i.CURRENT_IMAGE_SMOOTHING_QUALITY=t.imageSmoothingQuality),this},Setting.prototype.resetOtherStyles=function(){var t=this.ctx;return t.CURRENT_LINE_CAP!==OtherStyle.DEFAULT_LINE_CAP&&(t.lineCap=t.CURRENT_LINE_CAP=OtherStyle.DEFAULT_LINE_CAP),t.CURRENT_LINE_JOIN!==OtherStyle.DEFAULT_LINE_JOIN&&(t.lineJoin=t.CURRENT_LINE_JOIN=OtherStyle.DEFAULT_LINE_JOIN),t.CURRENT_MITER_LIMIT!==OtherStyle.DEFAULT_MITER_LIMIT&&(t.miterLimit=t.CURRENT_MITER_LIMIT=OtherStyle.DEFAULT_MITER_LIMIT),t.CURRENT_DIRECTION!==OtherStyle.DEFAULT_DIRECTION&&(t.direction=t.CURRENT_DIRECTION=OtherStyle.DEFAULT_DIRECTION),t.CURRENT_IMAGE_SMOOTHING_ENABLED!==OtherStyle.DEFAULT_IMAGE_SMOOTHING_ENABLED&&(t.imageSmoothingEnabled=t.CURRENT_IMAGE_SMOOTHING_ENABLED=OtherStyle.DEFAULT_IMAGE_SMOOTHING_ENABLED),t.CURRENT_IMAGE_SMOOTHING_QUALITY!==OtherStyle.DEFAULT_IMAGE_SMOOTHING_QUALITY&&(t.imageSmoothingQuality=t.CURRENT_IMAGE_SMOOTHING_QUALITY=OtherStyle.DEFAULT_IMAGE_SMOOTHING_QUALITY),this},Setting.prototype.initCurrentStyles=function(){var t=this.ctx;t.CURRENT_GLOBAL_ALPHA=Setting.DEFAULT_GLOBAL_ALPHA,t.CURRENT_GLOBAL_COMPOSITE_OPERATION=Setting.DEFAULT_GLOBAL_COMPOSITE_OPERATION,t.CURRENT_FILTER=Setting.DEFAULT_FILTER,t.CURRENT_FILL_STYLE=FillStrokeStyle.DEFAULT_FILL_STYLE,t.CURRENT_STROKE_STYLE=FillStrokeStyle.DEFAULT_STROKE_STYLE,t.CURRENT_FONT=TextStyle.DEFAULT_FONT,t.CURRENT_TEXT_ALIGN=TextStyle.DEFAULT_TEXT_ALIGN,t.CURRENT_TEXT_BASELINE=TextStyle.DEFAULT_TEXT_BASELINE,t.CURRENT_LINE_DASH=ShapeStyle.DEFAULT_LINE_DASH,t.CURRENT_LINE_DASH_OFFSET=ShapeStyle.DEFAULT_LINE_DASH_OFFSET,t.CURRENT_LINE_WIDTH=ShapeStyle.DEFAULT_LINE_WIDTH,t.CURRENT_SHADOW_BLUR=ShadowStyle.DEFAULT_SHADOW_BLUR,t.CURRENT_SHADOW_COLOR=ShadowStyle.DEFAULT_SHADOW_COLOR,t.CURRENT_SHADOW_OFFSET_X=ShadowStyle.DEFAULT_SHADOW_OFFSET_X,t.CURRENT_SHADOW_OFFSET_Y=ShadowStyle.DEFAULT_SHADOW_OFFSET_Y,t.CURRENT_LINE_CAP=OtherStyle.DEFAULT_LINE_CAP,t.CURRENT_LINE_JOIN=OtherStyle.DEFAULT_LINE_JOIN,t.CURRENT_MITER_LIMIT=OtherStyle.DEFAULT_MITER_LIMIT,t.CURRENT_DIRECTION=OtherStyle.DEFAULT_DIRECTION,t.CURRENT_IMAGE_SMOOTHING_ENABLED=OtherStyle.DEFAULT_IMAGE_SMOOTHING_ENABLED,t.CURRENT_IMAGE_SMOOTHING_QUALITY=OtherStyle.DEFAULT_IMAGE_SMOOTHING_QUALITY},ImgData.getPixelIndex=function(t,i,e){return 4*(i+e*t)},ImgData.getPixelColor=function(t,i,e){var s=t.data,n=ImgData.getPixelIndex(t.width,i,e);return new Rgb(s[n],s[n+1],s[n+2],s[n+3])},ImgData.getAverageColor=function(t,i,e,s,n){var o=t.width,r=t.height,h=t.data;isNaN(i)?(i=e=0,s=o,n=r):isNaN(s)?(s=o-i,n=r-e):(i+s>o&&(s=o-i),e+n>r&&(n=r-e));for(var a=0,c=0,p=0,u=0,l=s*n,f=ImgData.getPixelIndex(o,i,e),y=0;y<n;y++){for(var _=0;_<s;_++)a+=h[f],c+=h[f+1],p+=h[f+2],u+=h[f+3],f+=4;f+=4*(o-s)}return new Rgb(Math.round(a/l),Math.round(c/l),Math.round(p/l),Math.round(u/l))},ImgData.setPixelColor=function(t,i,e,s,n,o){var r=t.width,h=t.height,a=t.data;isNaN(e)?(e=s=0,n=r,o=h):isNaN(n)?(n=r-e,o=h-s):(e+n>r&&(n=r-e),s+o>h&&(o=h-s));for(var c=ImgData.getPixelIndex(r,e,s),p=0;p<o;p++){for(var u=0;u<n;u++)a[c]=i.red,a[c+1]=i.green,a[c+2]=i.blue,a[c+3]=i.alpha,c+=4;c+=4*(r-n)}},ImgData.mosaic=function(t,i,e,s,n,o){var r=t.width,h=t.height,a=t.data;if(isNaN(e)?(e=s=0,n=r,o=h):isNaN(n)?(n=r-e,o=h-s):(e+n>r&&(n=r-e),s+o>h&&(o=h-s)),1!==i){for(var c=Math.floor(o/i),p=Math.floor(n/i),u=n%i,l=o%i,f=ImgData.getPixelIndex(r,e,s),y=0;y<c;y++){for(var _=0;_<p;_++)d(y,_,i,i);d(y,p,u,i)}for(_=0;_<p;_++)d(c,_,i,l);d(c,p,u,l)}function d(t,e,s,n){var o,h,c=f+(t*r+e)*i*4,p=0,u=0,l=0,y=0,_=s*n,d=c;for(o=0;o<n;o++){for(h=0;h<s;h++)p+=a[d],u+=a[d+1],l+=a[d+2],y+=a[d+3],d+=4;d+=4*(r-s)}for(p=Math.round(p/_),u=Math.round(u/_),l=Math.round(l/_),y=Math.round(y/_),d=c,o=0;o<n;o++){for(h=0;h<s;h++)a[d]=p,a[d+1]=u,a[d+2]=l,a[d+3]=y,d+=4;d+=4*(r-s)}}},ImgData.transparencyDisposal=function(t,i,e,s,n,o){var r=t.width,h=t.height,a=t.data;isNaN(i)?(i=e=0,s=r,n=h):isNaN(s)?(s=r-i,n=h-e):(i+s>r&&(s=r-i),e+n>h&&(n=h-e)),o=o||255;for(var c=ImgData.getPixelIndex(r,i,e),p=0;p<n;p++){for(var u=0;u<s;u++)a[c]>=o&&a[c+1]>=o&&a[c+2]>=o&&(a[c+3]=0),c+=4;c+=4*(r-s)}},ImgData.reverseColor=function(t){for(var i=t.data,e=i.length,s=0;s<e;s+=4)i[s]=255-i[s],i[s+1]=255-i[s+1],i[s+2]=255-i[s+2]},ImgData.greyProcessing=function(t){for(var i=t.data,e=i.length,s=0;s<e;s+=4){var n=.299*i[s]+.587*i[s+1]+.114*i[s+2];i[s]=n,i[s+1]=n,i[s+2]=n}},ImgData.blackWhite=function(t,i){for(var e=t.data,s=e.length,n=i?254*i:127,o=0;o<s;o+=4){var r=Math.round((e[o]+e[o+1]+e[o+2])/3);e[o]=e[o+1]=e[o+2]=r>n?255:0}},ImgData.reliefFilter=function(t){for(var i=t.width,e=t.height,s=t.data,n=i-1,o=e-1,r=4*i,h=0,a=0;a<o;a++){for(var c=0;c<n;c++)s[h]=2*s[h]-s[h+4]-s[h+r]+127.5,s[h+1]=2*s[h+1]-s[h+5]-s[h+1+r]+127.5,s[h+2]=2*s[h+2]-s[h+6]-s[h+2+r]+127.5,h+=4;h+=4}for(h=ImgData.getPixelIndex(i,n,0),a=0;a<o;a++)s[h]=s[h-4],s[h+1]=s[h-3],s[h+2]=s[h-2],h+=r;for(h=ImgData.getPixelIndex(i,0,o),c=0;c<i;c++)s[h]=s[h-r],s[h+1]=s[h+1-r],s[h+2]=s[h+2-r],h+=4},ImgData.sunGlassFilter=function(t){for(var i=t.width,e=t.height,s=t.data,n=i-1,o=e-1,r=4*i,h=0,a=0;a<o;a++){for(var c=0;c<n;c++)s[h]=2*s[h]-1.5*s[h+4],s[h+1]=2*s[h+1]-1.5*s[h+5],s[h+2]=2*s[h+2]-1.5*s[h+6],h+=4;h+=4}for(h=ImgData.getPixelIndex(i,n,0),a=0;a<o;a++)s[h]=s[h-4],s[h+1]=s[h-3],s[h+2]=s[h-2],h+=r;for(h=ImgData.getPixelIndex(i,0,o),c=0;c<i;c++)s[h]=s[h-r],s[h+1]=s[h+1-r],s[h+2]=s[h+2-r],h+=4},Animate.prototype.drawDefault=function(){},Animate.prototype.drawInterval=function(){},Animate.prototype.start=function(){return this},Animate.prototype.stop=function(){return this},Animate.prototype.isStarted=function(){return void 0!==this.requestId},Utils.inheritPrototype(AnimateITV,Animate),AnimateITV.prototype.drawDefault=function(){this.ctx.clearRect(this.sx,this.sy,this.sw,this.sh),this.code(performance.now()-this.timestart)},AnimateITV.prototype.drawInterval=function(){this.ctx.clearRect(this.sx,this.sy,this.sw,this.sh),this.code(performance.now()-this.timestart),++this.animCount===this.count&&this.stop()},AnimateITV.prototype.start=function(){return this.isStarted()||(this.timestart=performance.now(),this.count<0?(this.drawDefault(),this.requestId=setInterval(this.defaultBind,this.delay)):1===this.count?this.drawDefault():this.count>1&&(this.drawDefault(),this.animCount=1,this.requestId=setInterval(this.intervalBind,this.delay))),this},AnimateITV.prototype.stop=function(){return this.requestId=clearInterval(this.requestId),this},Utils.inheritPrototype(AnimateRAF,Animate),AnimateRAF.prototype.drawDefault=function(t){this.requestId=requestAnimationFrame(this.defaultBind),void 0===this.timestart&&(this.timestart=t),this.ctx.clearRect(this.sx,this.sy,this.sw,this.sh),this.code(t-this.timestart)},AnimateRAF.prototype.drawInterval=function(t){this.requestId=requestAnimationFrame(this.intervalBind),void 0===this.timestart&&(this.timestart=t),t>this.animCount*this.delay+this.timestart&&(this.ctx.clearRect(this.sx,this.sy,this.sw,this.sh),this.code(t-this.timestart),++this.animCount===this.count&&this.stop())},AnimateRAF.prototype.start=function(){return this.isStarted()||(this.timestart=void 0,this.delay?(this.animCount=0,0!==this.count&&(this.requestId=requestAnimationFrame(this.intervalBind))):this.requestId=requestAnimationFrame(this.defaultBind)),this},AnimateRAF.prototype.stop=function(){return this.requestId=cancelAnimationFrame(this.requestId),this},Utils.inheritPrototype(AnimateGRD,AnimateRAF),AnimateGRD.prototype.drawDefault=function(t){this.requestId=requestAnimationFrame(this.defaultBind),void 0===this.timestart&&(this.timestart=t),this.ctx.fillStyle=this.ctx.CURRENT_FILL_STYLE=this.bgColor,this.ctx.fillRect(this.sx,this.sy,this.sw,this.sh),this.code(t-this.timestart)},AnimateGRD.prototype.drawInterval=function(t){this.requestId=requestAnimationFrame(this.intervalBind),void 0===this.timestart&&(this.timestart=t),t>this.animCount*this.delay+this.timestart&&(this.ctx.fillStyle=this.ctx.CURRENT_FILL_STYLE=this.bgColor,this.ctx.fillRect(this.sx,this.sy,this.sw,this.sh),this.code(t-this.timestart),++this.animCount===this.count&&this.stop())},BasicShape.prototype.init=function(t,i,e,s){return this.sx=t,this.sy=i,this.cx=e,this.cy=s,this._dx=t-e,this._dy=i-s,this},BasicShape.prototype.initXY=function(t,i){return this.sx=t,this.sy=i,this._dx=t-this.cx,this._dy=i-this.cy,this},BasicShape.prototype.initCXY=function(t,i){return this.cx=t,this.cy=i,this._dx=this.sx-t,this._dy=this.sy-i,this},BasicShape.prototype.fill=function(){return this.setTransform().process(),this.ctx.fill(),this.resetTransform(),this},BasicShape.prototype.fillEvenOdd=function(){return this.setTransform().process(),this.ctx.fill("evenodd"),this.resetTransform(),this},BasicShape.prototype.stroke=function(){return this.setTransform().process(),this.ctx.stroke(),this.resetTransform(),this},BasicShape.prototype.fillStroke=function(){return this.setTransform().process(),this.ctx.fill(),this.ctx.stroke(),this.resetTransform(),this},BasicShape.prototype.fillEvenOddStroke=function(){return this.setTransform().process(),this.ctx.fill("evenodd"),this.ctx.stroke(),this.resetTransform(),this},BasicShape.prototype.clip=function(){return this.ctx.save(),this.setTransform().process(),this.ctx.clip(),this.resetTransform(),this},BasicShape.prototype.clipEvenOdd=function(){return this.ctx.save(),this.setTransform().process(),this.ctx.clip("evenodd"),this.resetTransform(),this},BasicShape.prototype.restore=function(){return this.ctx.restore(),this},BasicShape.prototype.clear=function(t,i,e,s){return this.ctx.save(),this.setTransform().process(),this.ctx.clip(),this.ctx.clearRect(this._dx+t,this._dy+i,e,s),this.ctx.restore(),this},BasicShape.prototype.clearEvenOdd=function(t,i,e,s){return this.ctx.save(),this.setTransform().process(),this.ctx.clip("evenodd"),this.ctx.clearRect(this._dx+t,this._dy+i,e,s),this.ctx.restore(),this},BasicShape.prototype.setTransform=function(){var t=this.mat;return t.isNotDefault()?this.ctx.transform(t.getM11(),t.getM12(),t.getM21(),t.getM22(),t.offsetX+this.cx,t.offsetY+this.cy):(t._isTranslate=t.offsetX||t.offsetY||this.cx||this.cy)&&this.ctx.translate(t.offsetX+this.cx,t.offsetY+this.cy),this},BasicShape.prototype.resetTransform=function(){var t=this.mat;return t._isNotDefault?this.ctx.resetTransform():t._isTranslate&&this.ctx.translate(-t.offsetX-this.cx,-t.offsetY-this.cy),this},BasicShape.prototype.process=function(){throw new Error("Unimplemented method exception.")},BasicShape.prototype.isPointInPath=function(t,i){var e=this.mat;return this.process(),t-=e.offsetX+this.cx,i-=e.offsetY+this.cy,this.ctx.isPointInPath(e.getM11i()*t+e.getM21i()*i,e.getM12i()*t+e.getM22i()*i)},BasicShape.prototype.isPointInStroke=function(t,i){var e=this.mat;return this.process(),t-=e.offsetX+this.cx,i-=e.offsetY+this.cy,this.ctx.isPointInStroke(e.getM11i()*t+e.getM21i()*i,e.getM12i()*t+e.getM22i()*i)},BasicShape.prototype.getStartX=function(){return this.sx},BasicShape.prototype.setStartX=function(t){return this.sx=t,this._dx=t-this.cx,this},BasicShape.prototype.getStartY=function(){return this.sy},BasicShape.prototype.setStartY=function(t){return this.sy=t,this._dy=t-this.cy,this},BasicShape.prototype.getCenterX=function(){return this.cx},BasicShape.prototype.setCenterX=function(t){return this.cx=t,this._dx=this.sx-t,this},BasicShape.prototype.getCenterY=function(){return this.cy},BasicShape.prototype.setCenterY=function(t){return this.cy=t,this._dy=this.sy-t,this},BasicShape.prototype.getMatrix=function(){return this.mat},BasicShape.prototype.setMatrix=function(t){return this.mat=t,this},Utils.inheritPrototype(Shape,BasicShape),Shape.prototype.fill=function(){return this.setStyles().setTransform().process(),this.ctx.fill(),this.resetTransform(),this},Shape.prototype.fillEvenOdd=function(){return this.setStyles().setTransform().process(),this.ctx.fill("evenodd"),this.resetTransform(),this},Shape.prototype.stroke=function(){return this.setStyles().setTransform().process(),this.ctx.stroke(),this.resetTransform(),this},Shape.prototype.fillStroke=function(){return this.setStyles().setTransform().process(),this.ctx.fill(),this.ctx.stroke(),this.resetTransform(),this},Shape.prototype.fillEvenOddStroke=function(){return this.setStyles().setTransform().process(),this.ctx.fill("evenodd"),this.ctx.stroke(),this.resetTransform(),this},Shape.prototype.setStyles=function(){var t=this.ctx,i=this.sty;return t.CURRENT_FILL_STYLE!==i.fillStyle&&(t.fillStyle=t.CURRENT_FILL_STYLE=i.fillStyle),t.CURRENT_STROKE_STYLE!==i.strokeStyle&&(t.strokeStyle=t.CURRENT_STROKE_STYLE=i.strokeStyle),t.CURRENT_LINE_DASH!==i.lineDash&&(t.CURRENT_LINE_DASH=i.lineDash,t.setLineDash(i.lineDash)),t.CURRENT_LINE_DASH_OFFSET!==i.lineDashOffset&&(t.lineDashOffset=t.CURRENT_LINE_DASH_OFFSET=i.lineDashOffset),t.CURRENT_LINE_WIDTH!==i.lineWidth&&(t.lineWidth=t.CURRENT_LINE_WIDTH=i.lineWidth),this},Shape.prototype.getStyle=function(){return this.sty},Shape.prototype.setStyle=function(t){return this.sty=t,this},Utils.inheritPrototype(Rect,Shape),Rect.prototype.process=function(){this.ctx.beginPath(),this.ctx.rect(this._dx,this._dy,this.sw,this.sh)},Rect.prototype.isPointInPath=function(t,i){var e,s=this.mat,n=this._dx,o=this._dx+this.sw,r=this._dy,h=this._dy+this.sh;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,o<n&&(e=n,n=o,o=e),h<r&&(e=r,r=h,h=e),t>=n&&i>=r&&t<=o&&i<=h},Rect.prototype.isPointInStroke=function(t,i){var e,s=this.mat,n=this._dx,o=this._dx+this.sw,r=this._dy,h=this._dy+this.sh,a=this.sty.lineWidth;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,o<n&&(e=n,n=o,o=e),h<r&&(e=r,r=h,h=e),(0===Math.round((t-n)/a)||0===Math.round((t-o)/a))&&i>=r&&i<=h||(0===Math.round((i-r)/a)||0===Math.round((i-h)/a))&&t>=n&&t<=o},Rect.prototype.getWidth=function(){return this.sw},Rect.prototype.setWidth=function(t){return this.sw=t,this},Rect.prototype.getHeight=function(){return this.sh},Rect.prototype.setHeight=function(t){return this.sh=t,this},Utils.inheritPrototype(RoundRect,Rect),RoundRect.prototype.process=function(){var t=this.ctx,i=this._dx,e=this._dy,s=i+this.sw,n=e+this.sh,o=this.r;t.beginPath(),t.moveTo(i+o*(this.sw>0?1:-1),e),t.arcTo(s,e,s,n,o),t.arcTo(s,n,i,n,o),t.arcTo(i,n,i,e,o),t.arcTo(i,e,s,e,o)},RoundRect.prototype.getRadius=function(){return this.r},RoundRect.prototype.setRadius=function(t){return this.r=isNaN(t)?Math.round(Math.min(Math.abs(this.sw),Math.abs(this.sh))/4):t,this},Utils.inheritPrototype(ImageShape,Rect),ImageShape.prototype.draw=function(){return this},ImageShape.prototype.getImageBitmap=function(){return this.imageBitmap},ImageShape.prototype.setImageBitmap=function(t){return this.imageBitmap=t,this},ImageShape.prototype.initParams=function(t,i,e,s,n,o){return 0===arguments.length?(this.setWidth(this.imageBitmap.width).setHeight(this.imageBitmap.height),this.draw!==ImageShape.prototype.draw0&&(this.draw=ImageShape.prototype.draw0)):2===arguments.length?(this.setWidth(t).setHeight(i),this.draw!==ImageShape.prototype.draw2&&(this.draw=ImageShape.prototype.draw2)):(this.setWidth(t).setHeight(i),this.isx=e,this.isy=s,this.isw=n,this.ish=o,this.draw!==ImageShape.prototype.draw6&&(this.draw=ImageShape.prototype.draw6)),this},ImageShape.prototype.draw0=function(){return this.setTransform(),this.ctx.drawImage(this.imageBitmap,this._dx,this._dy),this.resetTransform(),this},ImageShape.prototype.draw2=function(){return this.setTransform(),this.ctx.drawImage(this.imageBitmap,this._dx,this._dy,this.sw,this.sh),this.resetTransform(),this},ImageShape.prototype.draw6=function(){return this.setTransform(),this.ctx.drawImage(this.imageBitmap,this.isx,this.isy,this.isw,this.ish,this._dx,this._dy,this.sw,this.sh),this.resetTransform(),this},Utils.inheritPrototype(Arc,Shape),Arc.prototype.process=function(){this.ctx.beginPath(),this.ctx.arc(this._dx,this._dy,this.r,this.startAngle,this.endAngle,this.anticlockwise)},Arc.prototype.isPointInPath=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,Math.sqrt(Math.pow(this._dx-t,2)+Math.pow(this._dy-i,2))<=this.r},Arc.prototype.isPointInStroke=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,0===Math.round((Math.sqrt(Math.pow(this._dx-t,2)+Math.pow(this._dy-i,2))-this.r)/this.sty.lineWidth)},Arc.prototype.getRadius=function(){return this.r},Arc.prototype.setRadius=function(t){return this.r=t,this},Arc.prototype.getStartAngle=function(){return this.startAngle},Arc.prototype.setStartAngle=function(t){return this.startAngle=t,this},Arc.prototype.getEndAngle=function(){return this.endAngle},Arc.prototype.setEndAngle=function(t){return this.endAngle=t,this},Arc.prototype.getAnticlockwise=function(){return this.anticlockwise},Arc.prototype.setAnticlockwise=function(t){return this.anticlockwise=t,this},Utils.inheritPrototype(Sector,Arc),Sector.prototype.process=function(){var t=this.ctx,i=this._dx,e=this._dy;t.beginPath(),t.moveTo(i,e),t.arc(i,e,this.r,this.startAngle,this.endAngle,this.anticlockwise),t.lineTo(i,e)},Sector.prototype.isPointInPath=Shape.prototype.isPointInPath,Sector.prototype.isPointInStroke=Shape.prototype.isPointInStroke,Utils.inheritPrototype(Ellipse,Arc),Ellipse.prototype.process=function(){this.ctx.beginPath(),this.ctx.ellipse(this._dx,this._dy,this.r,this.radiusY,this.rotation,this.startAngle,this.endAngle,this.anticlockwise)},Ellipse.prototype.isPointInPath=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i-this._dy,t=s.getM11i()*t+s.getM21i()*i-this._dx,i=-this._sin*t+this._cos*e,t=this._cos*t+this._sin*e,Math.sqrt(Math.pow(t,2)*this._ryx+Math.pow(i,2)*this._rxy)<=this._sqrtRxRy},Ellipse.prototype.isPointInStroke=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i-this._dy,t=s.getM11i()*t+s.getM21i()*i-this._dx,i=-this._sin*t+this._cos*e,t=this._cos*t+this._sin*e,0===Math.round((Math.sqrt(Math.pow(t,2)*this._ryx+Math.pow(i,2)*this._rxy)-this._sqrtRxRy)/this.sty.lineWidth)},Ellipse.prototype.getRadiusX=function(){return this.r},Ellipse.prototype.setRadiusX=function(t){return this.r=t,this._sqrtRxRy=Math.sqrt(t*this.radiusY),this._rxy=t/this.radiusY,this._ryx=this.radiusY/t,this},Ellipse.prototype.getRadiusY=function(){return this.radiusY},Ellipse.prototype.setRadiusY=function(t){return this.radiusY=t,this._sqrtRxRy=Math.sqrt(this.r*t),this._rxy=this.r/t,this._ryx=t/this.r,this},Ellipse.prototype.setRadius=function(t,i){return this.r=t,this.radiusY=i,this._sqrtRxRy=Math.sqrt(t*i),this._rxy=t/i,this._ryx=i/t,this},Ellipse.prototype.getRotation=function(){return this.rotation},Ellipse.prototype.setRotation=function(t){return this.rotation!==t&&(this.rotation=t,this._cos=Math.cos(t),this._sin=Math.sin(t)),this},Utils.inheritPrototype(Line,Shape),Line.prototype.process=function(){this.ctx.beginPath(),this.ctx.moveTo(this._dx,this._dy),this.ctx.lineTo(this._ex,this._ey)},Line.prototype.getEndX=function(){return this.ex},Line.prototype.setEndX=function(t){return this.ex=t,this._ex=t-this.cx,this},Line.prototype.getEndY=function(){return this.ey},Line.prototype.setEndY=function(t){return this.ey=t,this._ey=t-this.cy,this},Utils.inheritPrototype(BezierLine,Line),BezierLine.prototype.process=function(){var t=this.ctx;t.beginPath(),t.moveTo(this._dx,this._dy),void 0===this.cp1x?t.lineTo(this._ex,this._ey):void 0===this.cp2x?t.quadraticCurveTo(this._cp1x,this._cp1y,this._ex,this._ey):t.bezierCurveTo(this._cp1x,this._cp1y,this._cp2x,this._cp2y,this._ex,this._ey)},BezierLine.prototype.getControlPoint1X=function(){return this.cp1x},BezierLine.prototype.setControlPoint1X=function(t){return this.cp1x=t,this._cp1x=t-this.cx,this},BezierLine.prototype.getControlPoint1Y=function(){return this.cp1y},BezierLine.prototype.setControlPoint1Y=function(t){return this.cp1y=t,this._cp1y=t-this.cy,this},BezierLine.prototype.getControlPoint2X=function(){return this.cp2x},BezierLine.prototype.setControlPoint2X=function(t){return this.cp2x=t,this._cp2x=t-this.cx,this},BezierLine.prototype.getControlPoint2Y=function(){return this.cp2y},BezierLine.prototype.setControlPoint2Y=function(t){return this.cp2y=t,this._cp2y=t-this.cy,this},Utils.inheritPrototype(ArrowHead,Shape),ArrowHead.prototype.process=function(){var t=this.ctx,i=this._dx-this.al*this._cos,e=this._dy-this.al*this._sin,s=this.al*this._tan*this._sin,n=this.al*this._tan*this._cos,o=i+s,r=e-n;t.beginPath(),t.moveTo(o,r),t.lineTo(this._dx,this._dy),t.lineTo(i-s,e+n),this.closed&&t.lineTo(o,r)},ArrowHead.prototype.getAngle=function(){return this.an},ArrowHead.prototype.setAngle=function(t){return this.an!==t&&(this.an=t,this._cos=Math.cos(t),this._sin=Math.sin(t)),this},ArrowHead.prototype.getClosed=function(){return this.closed},ArrowHead.prototype.setClosed=function(t){return this.closed=t,this},ArrowHead.prototype.getArrowLength=function(){return this.al},ArrowHead.prototype.setArrowLength=function(t){return this.al=t,this},ArrowHead.prototype.getArrowAngle=function(){return this.aa},ArrowHead.prototype.setArrowAngle=function(t){return this.aa!==t&&(this.aa=t,this._tan=Math.tan(t)),this},Utils.inheritPrototype(Arrow,ArrowHead),Arrow.prototype.process=function(){var t=this.ctx,i=this._dx,e=this._dy,s=this._ex,n=this._ey;if(this.setAngle(Math.atan2(e-n,i-s)),ArrowHead.prototype.process.call(this),t.moveTo(i,e),0!==this.el){var o=Math.sqrt(Math.pow(s-i,2)+Math.pow(n-e,2)),r=(1-this.el/o)/2,h=i*(1-r)+s*r,a=e*(1-r)+n*r;t.lineTo(h,a),t.moveTo(i+s-h,e+n-a)}t.lineTo(s,n)},Arrow.prototype.getEndX=function(){return this.ex},Arrow.prototype.setEndX=function(t){return this.ex=t,this._ex=t-this.cx,this},Arrow.prototype.getEndY=function(){return this.ey},Arrow.prototype.setEndY=function(t){return this.ey=t,this._ey=t-this.cy,this},Arrow.prototype.getEmptyLength=function(){return this.el},Arrow.prototype.setEmptyLength=function(t){return this.el=t,this},Utils.inheritPrototype(RegularPolygon,Shape),RegularPolygon.prototype.process=function(){var t,i=this.ctx,e=this._dx,s=this._dy,n=this._cos,o=this._sin,r=e,h=s-this.r;i.beginPath(),i.moveTo(r,h);for(var a=0;a<this.sides-1;a++)t=(r-e)*o+(h-s)*n+s,r=(r-e)*n-(h-s)*o+e,h=t,i.lineTo(r,h);i.lineTo(e,s-this.r)},RegularPolygon.prototype.getRadius=function(){return this.r},RegularPolygon.prototype.setRadius=function(t){return this.r=t,this},RegularPolygon.prototype.getSides=function(){return this.sides},RegularPolygon.prototype.setSides=function(t){return this.sides!==t&&(this.sides=t,this._cos=Math.cos(2*Math.PI/t),this._sin=Math.sin(2*Math.PI/t)),this},Utils.inheritPrototype(RegularStar,RegularPolygon),RegularStar.prototype.process=function(){var t,i,e=this.ctx,s=this._dx,n=this._dy,o=s,r=n-this.r,h=this._cos,a=this._sin;if(e.beginPath(),e.moveTo(o,r),this._even){for(i=0;i<this.sides/2-1;i++)u();e.lineTo(s,n-this.r);var c=(o-s)*this._cosh-(r-n)*this._sinh+s,p=(o-s)*this._sinh+(r-n)*this._cosh+n;for(o=c,r=p,e.moveTo(o,r),i=0;i<this.sides/2-1;i++)u();e.lineTo(c,p)}else{for(i=0;i<this.sides-1;i++)u();e.lineTo(s,n-this.r)}function u(){t=(o-s)*a+(r-n)*h+n,o=(o-s)*h-(r-n)*a+s,r=t,e.lineTo(o,r)}},RegularStar.prototype.setSides=function(t){return this.sides!==t&&(this.sides=t,this._cos=Math.cos(4*Math.PI/t),this._sin=Math.sin(4*Math.PI/t),(this._even=t%2==0)&&(this._cosh=Math.cos(2*Math.PI/t),this._sinh=Math.sin(2*Math.PI/t))),this},Utils.inheritPrototype(Text,BasicShape),Text.prototype.fill=function(){return this.setStyles().setTransform(),this.ctx.fillText(this.text,this._dx,this._dy),this.resetTransform(),this},Text.prototype.stroke=function(){return this.setStyles().setTransform(),this.ctx.strokeText(this.text,this._dx,this._dy),this.resetTransform(),this},Text.prototype.fillStroke=function(){return this.setStyles().setTransform(),this.ctx.fillText(this.text,this._dx,this._dy),this.ctx.strokeText(this.text,this._dx,this._dy),this.resetTransform(),this},Text.prototype.setStyles=function(){var t=this.ctx,i=this.sty;return t.CURRENT_FILL_STYLE!==i.fillStyle&&(t.fillStyle=t.CURRENT_FILL_STYLE=i.fillStyle),t.CURRENT_STROKE_STYLE!==i.strokeStyle&&(t.strokeStyle=t.CURRENT_STROKE_STYLE=i.strokeStyle),t.CURRENT_FONT!==i.font&&(t.font=t.CURRENT_FONT=i.font),t.CURRENT_TEXT_ALIGN!==i.textAlign&&(t.textAlign=t.CURRENT_TEXT_ALIGN=i.textAlign),t.CURRENT_TEXT_BASELINE!==i.textBaseline&&(t.textBaseline=t.CURRENT_TEXT_BASELINE=i.textBaseline),this},Text.prototype.getText=function(){return this.text},Text.prototype.setText=function(t){return this.text=t,this},Text.prototype.getStyle=function(){return this.sty},Text.prototype.setStyle=function(t){return this.sty=t,this},Utils.inheritPrototype(DotShape,Shape),DotShape.prototype._initDataPoints=function(){return this._processedPoints=new Array(this.length),this._actualPoints=new Array(this.length),this},DotShape.prototype._initCache=function(){var t=new Map;return t.set("points",new Array(this.points.length)),t.set("length",NaN),t.set("_dx",NaN),t.set("_dy",NaN),t.set("cx",NaN),t.set("cy",NaN),t.set("matrix",new Matrix),this.cache=t,this},DotShape.prototype._useCache=function(){var t,i,e=this.cache,s=e.get("points"),n=e.get("matrix"),o=this.points,r=this.mat,h=!1,a=!1,c=!1,p=!1,u=!1;for(n.equals(r)||(n.skewX=r.skewX,n.skewY=r.skewY,n.scaleX=r.scaleX,n.scaleY=r.scaleY,n.angle=r.angle,n.offsetX=r.offsetX,n.offsetY=r.offsetY,h=!0),t=0;t<o.length;t++)i=o[t],s[t]!==i&&(s[t]=i,a=!0);return e.get("length")!==this.length&&(e.set("length",this.length),c=!0),e.get("_dx")===this._dx&&e.get("_dy")===this._dy||(e.set("_dx",this._dx),e.set("_dy",this._dy),p=!0),(a||c||p)&&this._preprocess(),e.get("cx")===this.cx&&e.get("cy")===this.cy||(e.set("cx",this.cx),e.set("cy",this.cy),u=!0),!(h||a||c||p||u)},DotShape.prototype.setTransform=function(){if(this._useCache())return this;var t,i,e,s=this.mat;if(s.isNotDefault())for(t=0;t<this.length;t+=2)i=this._processedPoints[t],e=this._processedPoints[t+1],this._actualPoints[t]=s.getM11()*i+s.getM21()*e+s.offsetX+this.cx,this._actualPoints[t+1]=s.getM12()*i+s.getM22()*e+s.offsetY+this.cy;else if(s.offsetX||s.offsetY||this.cx||this.cy)for(t=0;t<this.length;t+=2)this._actualPoints[t]=this._processedPoints[t]+s.offsetX+this.cx,this._actualPoints[t+1]=this._processedPoints[t+1]+s.offsetY+this.cy;else for(t=0;t<this.length;t+=2)this._actualPoints[t]=this._processedPoints[t],this._actualPoints[t+1]=this._processedPoints[t+1];return this},DotShape.prototype.resetTransform=function(){return this},DotShape.prototype.isPointInPath=function(t,i){return this.process(),this.ctx.isPointInPath(t,i)},DotShape.prototype.isPointInStroke=function(t,i){return this.process(),this.ctx.isPointInStroke(t,i)},DotShape.prototype._preprocess=function(){for(var t=0;t<this.length;t+=2)this._processedPoints[t]=this._dx+this.points[t],this._processedPoints[t+1]=this._dy+this.points[t+1];return this},DotShape.prototype.getProcessedPoints=function(){return this._processedPoints},DotShape.prototype.getActualPoints=function(){return this._actualPoints},DotShape.prototype.getPoints=function(){return this.points},DotShape.prototype.setPoints=function(t){return this.points=t,this.length=t.length,this},DotShape.prototype.getLength=function(){return this.length},DotShape.prototype.setLength=function(t){return this.length=t>0?t:0,this},DotShape.prototype.insert=function(t,i){return this.points.push(t,i),this.length+=2,this},DotShape.prototype.insertAt=function(t,i,e){return this.points.splice(2*e,0,t,i),this.length+=2,this},DotShape.prototype.delete=function(t){return this.points.splice(2*t,2),this.length-=2,this},DotShape.prototype.update=function(t,i,e){return e*=2,this.points[e]=t,this.points[e+1]=i,this},DotShape.prototype.select=function(t){return t*=2,new Point(this.points[t],this.points[t+1])},DotShape.prototype.selectAll=function(){for(var t=new Array(this.points.length/2),i=0;i<this.points.length;i+=2)t[i/2]=new Point(this.points[i],this.points[i+1]);return t},Utils.inheritPrototype(Polyline,DotShape),Polyline.prototype.process=function(){this.ctx.beginPath();for(var t=0;t<this.length;t+=2)0!==t?this.ctx.lineTo(this._actualPoints[t],this._actualPoints[t+1]):this.ctx.moveTo(this._actualPoints[t],this._actualPoints[t+1])},Utils.inheritPrototype(Bezier,Polyline),Bezier.prototype._preprocess=function(){var t,i,e,s,n;for(t=0;t<this.length;t+=2){for(i=0,e=0,s=0;s<this.points.length;s+=2)n=o(s/2,this.points.length/2-1,t/(this.length-2)),i+=this.points[s]*n,e+=this.points[s+1]*n;this._processedPoints[t]=this._dx+i,this._processedPoints[t+1]=this._dy+e}return this;function o(t,i,e){return Utils.combination(t,i)*Math.pow(e,t)*Math.pow(1-e,i-t)}},Bezier.prototype.setPoints=function(t){return this.points=t,this},Bezier.prototype.insert=function(t,i){return this.points.push(t,i),this},Bezier.prototype.insertAt=function(t,i,e){return this.points.splice(2*e,0,t,i),this},Bezier.prototype.delete=function(t){return this.points.splice(2*t,2),this},Utils.inheritPrototype(Polygon,DotShape),Polygon.prototype.process=function(){this.ctx.beginPath();for(var t=0;t<this.length;t+=2)0===t&&this.ctx.moveTo(this._actualPoints[this.length-2],this._actualPoints[this.length-1]),this.ctx.lineTo(this._actualPoints[t],this._actualPoints[t+1])},Utils.inheritPrototype(PolyRect,Polygon),PolyRect.prototype._preprocess=function(){var t=this.points,i=this._processedPoints,e=this._dx+t[0],s=this._dy+t[1],n=this._dx+t[2],o=this._dy+t[3];return i[0]=i[6]=e,i[1]=i[3]=s,i[2]=i[4]=n,i[5]=i[7]=o,e<n?(this._left=e,this._right=n):(this._left=n,this._right=e),s<o?(this._top=s,this._bottom=o):(this._top=o,this._bottom=s),this},PolyRect.prototype.isPointInPath=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,t>=this._left&&i>=this._top&&t<=this._right&&i<=this._bottom},PolyRect.prototype.isPointInStroke=function(t,i){var e,s=this.mat,n=this.sty.lineWidth;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,(0===Math.round((t-this._left)/n)||0===Math.round((t-this._right)/n))&&i>=this._top&&i<=this._bottom||(0===Math.round((i-this._top)/n)||0===Math.round((i-this._bottom)/n))&&t>=this._left&&t<=this._right},PolyRect.prototype.setPoints=function(t){return this.points=t,this},Utils.inheritPrototype(PolyArc,Polygon),PolyArc.prototype._preprocess=function(){var t,i,e=this.points[0],s=this.points[1],n=Math.cos(4*Math.PI/this.length),o=Math.sin(4*Math.PI/this.length),r=this.points[2]-e,h=this.points[3]-s;for(this._x=e+=this._dx,this._y=s+=this._dy,this._r=Math.sqrt(Math.pow(r,2)+Math.pow(h,2)),i=0;i<this.length;i+=2)this._processedPoints[i]=e+r,this._processedPoints[i+1]=s+h,t=h*n+r*o,r=r*n-h*o,h=t;return this},PolyArc.prototype.isPointInPath=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,Math.sqrt(Math.pow(this._x-t,2)+Math.pow(this._y-i,2))<=this._r},PolyArc.prototype.isPointInStroke=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,0===Math.round((Math.sqrt(Math.pow(this._x-t,2)+Math.pow(this._y-i,2))-this._r)/this.sty.lineWidth)},PolyArc.prototype.setPoints=function(t){return this.points=t,this},Utils.inheritPrototype(SmoothLine,DotShape),SmoothLine.prototype._preprocess=function(){var t,i,e,s,n,o,r,h,a=0,c=0,p=this._processedPoints[0]=this._dx+this.points[0],u=this._processedPoints[1]=this._dy+this.points[1];for(r=2;r<this.points.length;r+=2)e=this._dx+this.points[r],s=this._dy+this.points[r+1],n=this._dx+this.points[r+2],o=this._dy+this.points[r+3],isNaN(n)?t=i=0:(t=(n-p)/8,i=(o-u)/8),h=3*r-4,this._processedPoints[h]=p+a,this._processedPoints[h+1]=u+c,this._processedPoints[h+2]=e-t,this._processedPoints[h+3]=s-i,this._processedPoints[h+4]=e,this._processedPoints[h+5]=s,a=t,c=i,p=e,u=s},SmoothLine.prototype.process=function(){this.ctx.beginPath(),this.ctx.moveTo(this._actualPoints[0],this._actualPoints[1]);for(var t=2;t<this.length;t+=6)this.ctx.bezierCurveTo(this._actualPoints[t],this._actualPoints[t+1],this._actualPoints[t+2],this._actualPoints[t+3],this._actualPoints[t+4],this._actualPoints[t+5])},SmoothLine.prototype.setPoints=function(t){return this.points=t,this.length=3*t.length-4,this},SmoothLine.prototype.insert=function(t,i){return this.points.push(t,i),0!==this.length?this.length+=6:this.length=2,this},SmoothLine.prototype.insertAt=function(t,i,e){return this.points.splice(2*e,0,t,i),0!==this.length?this.length+=6:this.length=2,this},SmoothLine.prototype.delete=function(t){return this.points.splice(2*t,2),this.length>2?this.length-=6:this.length=0,this},Utils.inheritPrototype(Dots,DotShape),Dots.prototype.process=function(){var t,i,e;for(this.ctx.beginPath(),t=0;t<this.length;t+=2)i=this._actualPoints[t],e=this._actualPoints[t+1],this.ctx.moveTo(i+this.r,e),this.ctx.arc(i,e,this.r,0,2*Math.PI,!1)},Dots.prototype.getRadius=function(){return this.r},Dots.prototype.setRadius=function(t){return this.r=t,this},Utils.inheritPrototype(FixedShape,Shape),FixedShape.prototype.fill=function(){return this.setStyles().setTransform(),this.ctx.fill(this.path),this.resetTransform(),this},FixedShape.prototype.fillEvenOdd=function(){return this.setStyles().setTransform(),this.ctx.fill(this.path,"evenodd"),this.resetTransform(),this},FixedShape.prototype.stroke=function(){return this.setStyles().setTransform(),this.ctx.stroke(this.path),this.resetTransform(),this},FixedShape.prototype.fillStroke=function(){return this.setStyles().setTransform(),this.ctx.fill(this.path),this.ctx.stroke(this.path),this.resetTransform(),this},FixedShape.prototype.fillEvenOddStroke=function(){return this.setStyles().setTransform(),this.ctx.fill(this.path,"evenodd"),this.ctx.stroke(this.path),this.resetTransform(),this},FixedShape.prototype.clip=function(){return this.ctx.save(),this.setTransform(),this.ctx.clip(this.path),this.resetTransform(),this},FixedShape.prototype.clipEvenOdd=function(){return this.ctx.save(),this.setTransform(),this.ctx.clip(this.path,"evenodd"),this.resetTransform(),this},FixedShape.prototype.clear=function(t,i,e,s){this.ctx.save(),this.setTransform(),this.ctx.clip(this.path),this.ctx.clearRect(this._dx+t,this._dy+i,e,s),this.ctx.restore()},FixedShape.prototype.clearEvenOdd=function(t,i,e,s){this.ctx.save(),this.setTransform(),this.ctx.clip(this.path,"evenodd"),this.ctx.clearRect(this._dx+t,this._dy+i,e,s),this.ctx.restore()},FixedShape.prototype.isPointInPath=function(t,i){var e=this.mat;return t-=e.offsetX+this.cx,i-=e.offsetY+this.cy,this.ctx.isPointInPath(this.path,e.getM11i()*t+e.getM21i()*i,e.getM12i()*t+e.getM22i()*i)},FixedShape.prototype.isPointInStroke=function(t,i){var e=this.mat;return t-=e.offsetX+this.cx,i-=e.offsetY+this.cy,this.ctx.isPointInStroke(this.path,e.getM11i()*t+e.getM21i()*i,e.getM12i()*t+e.getM22i()*i)},FixedShape.prototype.getPath=function(){return this.path},FixedShape.prototype.setPath=function(t){return this.path=t,this},Utils.inheritPrototype(FixedRect,FixedShape),FixedRect.prototype.process=function(){this.path.rect(this._dx,this._dy,this.sw,this.sh),this.sw>0?(this._left=this._dx,this._right=this._dx+this.sw):(this._left=this._dx+this.sw,this._right=this._dx),this.sh>0?(this._top=this._dy,this._bottom=this._dy+this.sh):(this._top=this._dy+this.sh,this._bottom=this._dy)},FixedRect.prototype.isPointInPath=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,t>=this._left&&i>=this._top&&t<=this._right&&i<=this._bottom},FixedRect.prototype.isPointInStroke=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,(0===Math.round((t-this._left)/this.sty.lineWidth)||0===Math.round((t-this._right)/this.sty.lineWidth))&&i>=this._top&&i<=this._bottom||(0===Math.round((i-this._top)/this.sty.lineWidth)||0===Math.round((i-this._bottom)/this.sty.lineWidth))&&t>=this._left&&t<=this._right},Utils.inheritPrototype(FixedArc,FixedShape),FixedArc.prototype.process=function(){this.path.arc(this._dx,this._dy,this.r,this.startAngle,this.endAngle,this.anticlockwise)},FixedArc.prototype.isPointInPath=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,Math.sqrt(Math.pow(this._dx-t,2)+Math.pow(this._dy-i,2))<=this.r},FixedArc.prototype.isPointInStroke=function(t,i){var e,s=this.mat;return t-=s.offsetX+this.cx,i-=s.offsetY+this.cy,e=s.getM12i()*t+s.getM22i()*i,t=s.getM11i()*t+s.getM21i()*i,i=e,0===Math.round((Math.sqrt(Math.pow(this._dx-t,2)+Math.pow(this._dy-i,2))-this.r)/this.sty.lineWidth)};
